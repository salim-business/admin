var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,o=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&n(e,a,t[a]);if(s)for(var a of s(t))r.call(t,a)&&n(e,a,t[a]);return e},d=(e,s)=>t(e,a(s)),l=(e,t,a)=>(n(e,"symbol"!=typeof t?t+"":t,a),a);import{a as h,m as c,r as p,R as g,j as m,b as u,I as S,U as y,L as D,c as f,B as b,C as I,d as C,e as v,f as x,S as P,g as T,h as A,i as w,F as M,M as E,k as L,l as O,n as R,P as k,o as U,T as N,p as K,D as z,q as F,E as B,s as $,t as V,u as q,v as j,w as _,x as H,y as W,z as G,A as J,G as Y,H as X,J as Z,K as Q,N as ee,O as te,Q as ae,V as se,W as ie,X as re,Y as ne,Z as oe,_ as de,$ as le,a0 as he,a1 as ce,a2 as pe,a3 as ge,a4 as me,a5 as ue,a6 as Se,a7 as ye}from"./vendor.766f4235.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const De={getItem:e=>"",setItem(e,t){}},fe=window.localStorage?window.localStorage:De,be=window.sessionStorage?window.sessionStorage:De,Ie="ADMIN_AUTH_KEY";const Ce=new class{getAuthKeyFromStorage(){const e=fe.getItem(Ie);return e||(be.getItem(Ie)||"")}clearAuthKeys(){fe.setItem(Ie,""),be.setItem(Ie,"")}setAuthKeyInSessionStorage(e){be.setItem(Ie,e),fe.setItem(Ie,"")}setAuthKeyInLocalStorage(e){fe.setItem(Ie,e),be.setItem(Ie,"")}setSiderCollapsedStateInLocalStorage(e){fe.setItem("ADMIN_SIDER_COLLAPSED_STATE",JSON.stringify(e))}setAdmin(e){fe.setItem("ADMIN_ADMIN",JSON.stringify(e))}isAdmin(){const e=fe.getItem("ADMIN_ADMIN");return e&&JSON.parse(e)}getSiderCollapsedStateFromLocalStorage(){const e=fe.getItem("ADMIN_SIDER_COLLAPSED_STATE");return e&&JSON.parse(e)}setDarkModeInLocalStorage(e){fe.setItem("ADMIN_DARK_MODE",JSON.stringify(e))}getDarkModeFromLocalStorage(){const e=fe.getItem("ADMIN_DARK_MODE");return e?JSON.parse(e):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}};class ve{constructor(e,t){l(this,"GET","GET"),l(this,"POST","POST"),l(this,"DELETE","DELETE"),l(this,"UPDATE","UPDATE"),l(this,"PUT","PUT"),l(this,"PATCH","PATCH"),l(this,"isDestroyed",!1),l(this,"authToken",""),this.baseUrl=e,this.onAuthFailure=t}createHeaders(){let e={};return this.authToken&&(e["X-Access-Token"]=this.authToken),e}setAuthToken(e){this.authToken=e}destroy(){this.isDestroyed=!0}fetch(e,t,a){const s=this;return function(){return Promise.resolve().then((function(){return new Promise((function(e){setTimeout(e,500)}))})).then((function(){return s.fetchInternal(e,t,a)})).then((function(e){return e.data})).catch((function(e){return new Promise((function(t,a){a(new Error(e.response?e.response.data.message:e.message))}))}))}}fetchInternal(e,t,a){if(e===this.GET)return this.getReq(t,a);if(e===this.POST)return this.postReq(t,a);if(e===this.PUT)return this.putReq(t,a);if(e===this.PATCH)return this.patchReq(t,a);if(e===this.DELETE)return this.deleteReq(t,a);throw new Error(`Unknown method: ${e}`)}getReq(e,t){return h.get(this.baseUrl+e,{params:t,headers:this.createHeaders()})}postReq(e,t){return h.post(this.baseUrl+e,t,{headers:this.createHeaders()})}putReq(e,t){return h.put(this.baseUrl+e,t,{headers:this.createHeaders()})}deleteReq(e,t){return h.delete(this.baseUrl+e,{params:t,headers:this.createHeaders()})}patchReq(e,t){return h.patch(this.baseUrl+e,t,{headers:this.createHeaders()})}}const xe=class{constructor(){l(this,"http");const e=this;this.http=new ve(this.getApiBaseUrl(),(function(){return xe.lastKnownPassword?e.getAuthToken(xe.lastKnownUsername,xe.lastKnownPassword):Promise.reject(new Error("No saved password. Ignore if initial call."))})),this.http.setAuthToken(xe.authToken)}getApiBaseUrl(){return"https://salim-api.igcfashion.co/api/v1"}getApiUrl(){return"https://salim-api.igcfashion.co/api/v1"}destroy(){this.http.destroy()}static getAuthTokenString(){return xe.authToken}setAuthToken(e){xe.authToken=e,e||Ce.clearAuthKeys(),this.http.setAuthToken(e)}static isLoggedIn(){return!!xe.authToken}getAuthToken(e,t){const a=this.http;xe.lastKnownPassword=t,xe.lastKnownUsername=e;const s=this;return Promise.resolve().then(a.fetch(a.POST,"/auth/login",{password:t,username:e})).then((function(e){if(!e.token)return Promise.reject(e);s.setAuthToken(e.token),Ce.setAdmin(e.isAdmin||!1)})).catch((function(e){return Promise.reject(e)}))}updatePathData(e,t){const a=this.http;return Promise.resolve().then(a.fetch(a.PATCH,e,t))}deletePathData(e,t){const a=this.http;return Promise.resolve().then(a.fetch(a.DELETE,e,t))}changePass(e,t,a){const s=this.http;return Promise.resolve().then(s.fetch(s.PATCH,"/me/updatePassword",{currentPassword:e,password:t,passwordConfirm:a}))}postPathData(e,t){const a=this.http;return Promise.resolve().then(a.fetch(a.POST,e,t))}getPathData(e,t){const a=this.http;return Promise.resolve().then(a.fetch(a.GET,e,o({},t)))}};let Pe=xe;l(Pe,"lastKnownPassword",""),l(Pe,"lastKnownUsername",""),l(Pe,"authToken",Ce.getAuthKeyFromStorage()||"");var Te={copyObject:e=>JSON.parse(JSON.stringify(e)),generateUuidV4:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),deleteAllCookies(){let e=document.cookie.split(";");for(let t=0;t<e.length;t++){let a=e[t],s=a.indexOf("="),i=s>-1?a.substr(0,s):a;document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}},getAnsiColorRegex(){const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,"g")},isMobile:()=>window.innerWidth<768,isSafari(){let e=!1;try{e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)}catch(t){console.log(t)}return e},getDelayedPromise:e=>e?new Promise(((t,a)=>{setTimeout((()=>{t()}),e)})):Promise.resolve(),createRandomStringHex(e){let t="";const a="0123456789abcdef",s=a.length;for(let i=0;i<e;i++)t+=a.charAt(Math.floor(Math.random()*s));return t},convertHexStringToUtf8:e=>e?decodeURIComponent(e.substring(8,e.length).replace(/\s+/g,"").replace(/[0-9a-f]{2}/g,"%$&")):"",mergeObjects(e,t){const a=e||{};return t=t||{},Object.keys(t).forEach((e=>{!a[e]||Array.isArray(a[e])||Array.isArray(t[e])?a[e]=t[e]:"object"==typeof t[e]&&"object"==typeof a[e]?a[e]=this.mergeObjects(a[e],t[e]):a[e]=t[e]})),a}};class Ae{static toast(e){c.error(e.message||"Something bad happened.")}static createCatcher(e){return function(t){Ae.toast(t),e&&e()}}}class we extends p.exports.Component{constructor(e){super(e),l(this,"willUnmountSoon"),l(this,"apiManager"),this.willUnmountSoon=!1,this.apiManager=new Pe}componentWillUnmount(){this.willUnmountSoon=!0,this.apiManager.destroy()}deletePathData(e){return new Promise((t=>{this.apiManager.deletePathData(e.path,e.query).then((e=>{t(e)})).catch((e=>{c.error(e.message)}))}))}updatePathData(e){return new Promise(((t,a)=>{this.apiManager.updatePathData(e.path,e.data).then((function(e){t(e)})).catch((e=>{a(e)}))}))}postPathData(e){return new Promise(((t,a)=>{this.apiManager.postPathData(e.path,e.data).then((e=>{t(e)})).catch((e=>{c.error(e.message),a(e)}))}))}getPathData(e){return new Promise(((t,a)=>{this.apiManager.getPathData(e.path,e.query).then((function(e){t(e)})).catch(Ae.createCatcher()).then(a)}))}}class Me extends we{constructor(e){super(e),this.state={loginOption:1}}componentDidMount(){super.componentDidMount&&super.componentDidMount(),Te.deleteAllCookies()}onLoginRequested(e,t,a){const s=this;this.apiManager.getAuthToken(e,t).then((function(){2===s.state.loginOption?Ce.setAuthKeyInSessionStorage(Pe.getAuthTokenString()):3===s.state.loginOption&&Ce.setAuthKeyInLocalStorage(Pe.getAuthTokenString()),s.props.history.push("/"),a()})).catch((e=>{a(),c.error(e.message)}))}render(){const e=this;return Pe.isLoggedIn()?u(v,{to:"/"}):u("div",{children:u("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:u(x,{title:"Log in",style:{width:350},children:u(Le,{onLoginRequested:(t,a,s,i)=>{e.setState({loginOption:s}),e.onLoginRequested(t,a,i)}})})})})}}const Ee={display:"block",height:"30px",lineHeight:"30px"};class Le extends g.Component{constructor(e){super(e),l(this,"handleSubmit",(()=>{this.setState({loading:!0},(()=>{this.props.onLoginRequested(this.state.username,this.state.passwordEntered,this.state.loginOption,(()=>setTimeout((()=>{this.setState({loading:!1})}),500)))}))})),this.state={loginOption:2,passwordEntered:"",username:"",loading:!1}}render(){const e=this;return m("div",{children:[u(S,{style:{marginBottom:20},size:"large",prefix:u(y,{style:{color:"rgba(0,0,0,.25)"}}),onChange:t=>{e.setState({username:`${t.target.value}`})},placeholder:"Username"}),u(S.Password,{size:"large",onKeyDown:t=>{13===t.keyCode&&e.handleSubmit()},prefix:u(D,{style:{color:"rgba(0,0,0,.25)"}}),onChange:t=>{e.setState({passwordEntered:`${t.target.value}`})},placeholder:"Password"}),u("div",{style:{marginTop:20,marginBottom:20},children:u(f,{justify:"end",children:u(b,{type:"primary",htmlType:"submit",loading:e.state.loading,onClick:()=>{e.handleSubmit()},children:e.state.loading?"Please wait...":"Login"})})}),u(I,{children:u(I.Panel,{header:"Remember Me",children:m(C.Group,{onChange:t=>{e.setState({loginOption:t.target.value})},value:e.state.loginOption,children:[u(C,{style:Ee,value:1,children:"No session persistence"}),u(C,{style:Ee,value:2,children:"Use sessionStorage"}),u(C,{style:Ee,value:3,children:"Use localStorage"})]})},"1")})]})}}function Oe(){return{type:"ROOT_KEY_CHANGED",payload:{}}}class Re extends p.exports.Component{render(){return u("div",{style:{width:"100%",textAlign:"center"},children:u(P,{style:{marginTop:60,marginBottom:60,width:"100%"},indicator:u(T,{style:{fontSize:32},spin:!0}),size:"large"})})}}class ke extends p.exports.Component{render(){return m("div",{style:{textAlign:"center",padding:36},children:[u("p",{children:this.props.message?this.props.message:"An error occurred. Please try again."}),u(f,{justify:"center",children:u(b,{type:"primary",onClick:()=>this.props.reloadCallBack(),children:"Reload"})})]})}}let Ue=Ce.getAuthKeyFromStorage()||"";var Ne=A(void 0,{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),l(this,"handleChange",(e=>{"removed"===e.file.status&&(this.setState({limit:!1}),this.setState({loading:!1}),this.deletePathData({path:`/gfsUpload/${e.file.response.streamId}`}),console.log(this.state.streamId,"stre"),this.setState({streamId:this.state.streamId.filter((function(t){return t!==e.file.response.streamId}))}),console.log(this.state.streamId),this.deletePathData({path:`/attachment/${e.file.response.filename}`}),this.setState({imgId:""})),"uploading"!==e.file.status?"done"===e.file.status&&(console.log(e.file,"done......................"),console.log(e),this.setState({imgId:e.file.response.filename}),this.setState({streamId:e.file.response.streamId}),console.log(e.file.response.attachmentId._id),this.setState({attachment:e.file.response.attachmentId._id}),this.getBase64(e.file.originFileObj,(e=>this.setState({imageUrl:e,loading:!1}))),e.fileList.length>=1&&this.setState({limit:!0})):this.setState({loading:!0})})),this.state={isLoading:!1,isModalVisible:!1,data:w(e.data,{}),loading:!1,imageUrl:"",imgId:[],streamId:[],attachment:"",limit:!1}}setData(e,t){this.setState({data:w(this.state.data,{[`${e}`]:t})})}add(){this.setState({isLoading:!0},(()=>{this[this.state.data.id?"updatePathData":"postPathData"]({path:"/banners",data:w(this.state.data,{imgId:this.state.imgId,attachment:this.state.attachment,streamId:this.state.streamId})}).then((()=>{c.success("Banner added successfully"),this.setState({isModalVisible:!1}),this.props.emitRootKeyChanged()})).catch((()=>{this.setState({isLoading:!1})}))}))}getBase64(e,t){const a=new FileReader;a.addEventListener("load",(()=>t(a.result))),a.readAsDataURL(e)}render(){const{loading:e,imageUrl:t}=this.state,a=m("div",{children:[u(e?T:k,{}),u("div",{style:{marginTop:8},children:"Upload"})]});return m(M,{children:[u(E,{title:(this.props.data?"UPDATE":"NEW")+" ITEM",visible:this.state.isModalVisible,onOk:this.add.bind(this),onCancel:()=>{this.setState({isModalVisible:!1,imgId:"",streamId:""}),this.setData("title",""),this.setData("h5",""),this.setData("text","")},okButtonProps:{disabled:this.state.isLoading},cancelButtonProps:{disabled:this.state.isLoading},okText:this.props.data?"UPDATE":"ADD",children:this.state.isLoading?u(Re,{}):m(L,{layout:"vertical",children:[u(f,{children:u(O,{name:"banner",listType:"picture-card",className:"avatar-uploader",action:`${this.apiManager.getApiUrl()}/gfsUpload`,onChange:this.handleChange,headers:{"X-Access-Token":Ue},children:this.state.limit?void 0:a})}),m(f,{gutter:{xs:8,sm:16,md:24,lg:32},children:[u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"Big Heading",required:!this.props.data,children:u(S,{type:"text",placeholder:"Big Heading",name:"name",size:"large",value:this.state.data.title,onChange:e=>this.setData("title",e.target.value)})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"Smaller heading",required:!this.props.data,children:u(S,{type:"text",placeholder:"Smaller heading",name:"cost",size:"large",value:this.state.data.h5,onChange:e=>this.setData("h5",e.target.value)})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"Text below heading",required:!this.props.data,children:u(S.TextArea,{placeholder:"Text below heading",name:"Text below heading",size:"large",value:this.state.data.text,onChange:e=>this.setData("text",e.target.value)})})})]})]})}),g.cloneElement(this.props.children,{onClick:()=>this.setState({isModalVisible:!0})})]})}});var Ke=A((function(e){return{isMobile:e.globalReducer.isMobile}}),{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={searchTerm:"",apiData:void 0,isLoading:!1}}onSearchUser(e,t){return new RegExp(e,"ig").test(t.username)}reFetchData(){this.setState({isLoading:!0},(()=>{this.getPathData({path:"/browse/banners"}).then((({items:e})=>{console.log(e,"banerss"),this.setState({isLoading:!1,apiData:e})})).catch((()=>this.setState({isLoading:!1})))}))}componentDidMount(){this.reFetchData()}render(){if(this.state.isLoading)return u(Re,{});if(!this.state.apiData)return u(ke,{reloadCallBack:this.reFetchData.bind(this)});const e=this.state.apiData.filter((e=>!this.state.searchTerm||this.onSearchUser(this.state.searchTerm,e))),t=u(S,{placeholder:"Search",type:"text",onChange:e=>this.setState({searchTerm:(e.target.value||"").trim()})});return u(f,{justify:"center",children:u(R,{xs:{span:23},lg:{span:16},style:{paddingBottom:300},children:m(x,{extra:!this.props.isMobile&&t,title:m(g.Fragment,{children:[m("span",{children:[u(U,{}),"  ","BANNERS"]}),u("br",{}),this.props.isMobile&&u("div",{style:{marginTop:8},children:t})]}),children:[u(N,{rowKey:"id",pagination:{defaultPageSize:5,hideOnSinglePage:!0,showSizeChanger:!1},columns:[{title:"Banner",dataIndex:"imgId",render:e=>u("img",{src:`${this.apiManager.getApiUrl()}/gfsUpload/preview/${e}`,width:100,height:100})},{title:"ACTIONS",dataIndex:"actions",render:(e,t)=>u("span",{children:u(K,{title:"Sure to delete?",onConfirm:()=>this.deletePathData({path:`/banners/${t.imgId}`}).then((()=>this.props.emitRootKeyChanged())),children:u(b,{type:"primary",danger:!0,shape:"circle",style:{marginLeft:"10px"},icon:u(z,{})})})})}],dataSource:e,size:"small"}),u(Ne,{children:m(b,{type:"primary",style:{marginTop:"15px"},children:[u(U,{}),"ADD"]})})]})})})}}),ze={connect(e,t="https://salim-api.igcfashion.co"){let a=Ce.getAuthKeyFromStorage();const s=F(t,{auth:{token:a},reconnectionAttempts:10,reconnectionDelay:5e3,reconnectionDelayMax:5e3});return console.log(t,"socket.."),s},disconnect(){this.client.end()}};class Fe extends we{constructor(e){super(e),this.state={isLoading:!1,stats:{},collections:0}}getOptions(e){return{color:"#1b8ad3",tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:e}]}}fetchStats(){this.getPathData({path:"/statistics/monthly"}).then((e=>{this.setState({stats:e}),this.fetchCollections()})).catch((()=>{}))}fetchCollections(){this.getPathData({path:"/statistics"}).then((e=>{this.setState({collections:e.totalCollections[0].cost})})).catch((()=>{}))}componentDidMount(){this.fetchStats();const e=ze.connect();e.on("conn",(()=>{console.log("socket connected")})),e.on("newOrder",(()=>{this.fetchStats()}))}render(){return m(M,{children:[m(f,{justify:"center",gutter:20,children:[u(R,{style:{marginBottom:20},lg:{span:10},xs:{span:23},children:u(x,{children:u(B,{option:d(o({},this.getOptions(this.state.stats.users)),{title:{text:"USERS"}}),notMerge:!0,lazyUpdate:!0,style:{height:"220px",width:"100%"}})})}),u(R,{style:{marginBottom:20},lg:{span:10},xs:{span:23},children:u(x,{children:u(B,{option:d(o({},this.getOptions(this.state.stats.orders)),{title:{text:"ORDERS"}}),notMerge:!0,lazyUpdate:!0,style:{height:"220px",width:"100%"}})})})]}),u(f,{justify:"center",gutter:20,children:u($,{title:"Collections",value:`UGX ${this.state.collections}`})})]})}}class Be extends p.exports.Component{handleClick(e){e.preventDefault(),this.props.onLinkClicked&&this.props.onLinkClicked()}render(){return u("a",{onClick:e=>this.handleClick(e),children:this.props.children})}}const $e=new class{loadTheme(e){return Promise.resolve()}};class Ve extends p.exports.Component{constructor(e){super(e),this.state={isChecked:Ce.getDarkModeFromLocalStorage()}}render(){return u(V,{checkedChildren:u(q,{}),unCheckedChildren:u(j,{}),checked:this.state.isChecked,onChange:e=>{Ce.setDarkModeInLocalStorage(e),$e.loadTheme(e),this.setState({isChecked:e})}})}}let qe=Ce.getAuthKeyFromStorage()||"";var je=A(void 0,{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),l(this,"handleChange",(e=>{"removed"===e.file.status&&(this.deletePathData({path:`/gfsUpload/${e.file.response.streamId}`}),this.setState({streamIds:this.state.streamIds.filter((function(t){return t!==e.file.response.streamId}))}),this.deletePathData({path:`/attachment/${e.file.response.filename}`}),this.setState({imgIds:this.state.imgIds.filter((function(t){return t!==e.file.response.filename}))}),this.setState({limit:this.state.limit-1})),"uploading"!==e.file.status?"done"===e.file.status&&(console.log(e.file,"done......................"),console.log(e),this.setState({imgIds:[...this.state.imgIds,e.file.response.filename]}),this.setState({streamIds:[...this.state.streamIds,e.file.response.streamId]}),console.log(e.file.response.attachmentId._id),this.setState({attachment:e.file.response.attachmentId._id}),this.getBase64(e.file.originFileObj,(e=>this.setState({imageUrl:e,loading:!1}))),e.fileList.length>=10&&this.setState({limit:!0})):this.setState({loading:!0})})),this.state={isLoading:!1,isModalVisible:!1,data:w(e.data,{}),loading:!1,imageUrl:"",imgIds:[],streamIds:[],attachment:"",limit:!1}}setData(e,t){this.setState({data:w(this.state.data,{[`${e}`]:t})})}add(){this.setState({isLoading:!0},(()=>{this[this.state.data._id?"updatePathData":"postPathData"]({path:"/gridProducts",data:w(this.state.data,{imgIds:this.state.imgIds,attachment:this.state.attachment,streamIds:this.state.streamIds})}).then((()=>{c.success(`Product ${this.props.data.id?"updated":"added"} sucessfully`),this.props.emitRootKeyChanged(),this.setState({isModalVisible:!1})})).catch((()=>{this.setState({isLoading:!1})}))}))}getBase64(e,t){const a=new FileReader;a.addEventListener("load",(()=>t(a.result))),a.readAsDataURL(e)}render(){const{loading:e,imageUrl:t}=this.state,a=m("div",{children:[u(e?T:k,{}),u("div",{style:{marginTop:8},children:"Upload"})]});return m(M,{children:[u(E,{title:(this.props.data?"UPDATE":"NEW")+" ITEM",visible:this.state.isModalVisible,onOk:this.add.bind(this),onCancel:()=>{this.setState({isModalVisible:!1,imgIds:[],attachment:"",streamIds:[]}),this.setData("category",""),this.setData("name",""),this.setData("cost",""),this.setData("description","")},okButtonProps:{disabled:this.state.isLoading},cancelButtonProps:{disabled:this.state.isLoading},okText:this.props.data?"UPDATE":"ADD",children:this.state.isLoading?u(Re,{}):m(L,{layout:"vertical",children:[u(f,{children:u(O,{name:"banner",listType:"picture-card",className:"avatar-uploader",showUploadList:!0,action:`${this.apiManager.getApiUrl()}/gfsUpload`,onChange:this.handleChange,headers:{"X-Access-Token":qe},multiple:!0,children:this.state.limit?void 0:a})}),m(f,{gutter:{xs:8,sm:16,md:24,lg:32},children:[u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"Catergory",required:!this.props.data,children:u(_,{placeholder:"Category",size:"large",value:this.state.data.catergory,onChange:e=>this.setData("category",e),defaultValue:this.state.data.category,children:["MEN","WOMEN"].map(((e,t)=>u(_.Option,{value:e,children:e},t)))})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"VARIANT",required:!this.props.data,children:u(_,{placeholder:"Variant",size:"large",value:this.state.data.variant,onChange:e=>this.setData("variant",e),defaultValue:this.state.data.variant,children:["Supplements","Hair"].map(((e,t)=>u(_.Option,{value:e,children:e},t)))})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"NAME OF ITEM",required:!this.props.data,children:u(S,{type:"text",placeholder:"Name",name:"name",size:"large",value:this.state.data.name,onChange:e=>this.setData("name",e.target.value)})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"UNIT COST",required:!this.props.data,children:u(S,{type:"number",placeholder:"Cost",name:"cost",size:"large",value:this.state.data.cost,onChange:e=>this.setData("cost",e.target.value)})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"Description",required:!this.props.data,children:u(S.TextArea,{placeholder:"DESCRIPTION",name:"DESCRIPTION",size:"large",value:this.state.data.description,onChange:e=>this.setData("description",e.target.value)})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"Quantity",required:!this.props.data,children:u(S,{type:"number",placeholder:"Number of pieces",name:"stock",size:"large",value:this.state.data.stock,onChange:e=>this.setData("stock",e.target.value)})})})]})]})}),g.cloneElement(this.props.children,{onClick:()=>this.setState({isModalVisible:!0})})]})}});var _e=A((function(e){return{isMobile:e.globalReducer.isMobile}}),{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={searchTerm:"",apiData:void 0,isLoading:!1}}onSearchUser(e,t){return new RegExp(e,"ig").test(t.name)}reFetchData(){this.setState({isLoading:!0},(()=>{this.getPathData({path:"/browse/gridProducts"}).then((({items:e})=>{this.setState({isLoading:!1,apiData:e})})).catch((()=>this.setState({isLoading:!1})))}))}componentDidMount(){this.reFetchData()}render(){if(this.state.isLoading)return u(Re,{});if(!this.state.apiData)return u(ke,{reloadCallBack:this.reFetchData.bind(this)});const e=this.state.apiData.filter((e=>!this.state.searchTerm||this.onSearchUser(this.state.searchTerm,e))),t=u(S,{placeholder:"Search",type:"text",onChange:e=>this.setState({searchTerm:(e.target.value||"").trim()})});return u(f,{justify:"center",children:u(R,{xs:{span:23},lg:{span:16},style:{paddingBottom:300},children:m(x,{extra:!this.props.isMobile&&t,title:m(g.Fragment,{children:[m("span",{children:[u(U,{}),"  ","ITEMS"]}),u("br",{}),this.props.isMobile&&u("div",{style:{marginTop:8},children:t})]}),children:[u(N,{rowKey:"id",pagination:{defaultPageSize:5,hideOnSinglePage:!0,showSizeChanger:!1},columns:[{title:"ITEM",dataIndex:"imgIds",render:e=>u("img",{src:`${this.apiManager.getApiUrl()}/gfsUpload/preview/${e[0]}`,width:100,height:100})},{title:"NAME",dataIndex:"name"},{title:"COST",dataIndex:"cost"},{title:"DESCRIPTION",dataIndex:"description",render:e=>e.substring(0,75).concat("...")},{title:"ACTIONS",dataIndex:"actions",render:(e,t)=>m("span",{children:[u(je,{data:t,children:u(b,{type:"primary",children:u(H,{})})}),u(K,{title:"Sure to delete?",onConfirm:()=>{this.deletePathData({path:`/items/${t._id}`}).then((()=>this.props.emitRootKeyChanged()))},children:u(b,{type:"primary",danger:!0,shape:"circle",style:{marginLeft:"10px"},icon:u(z,{})})})]})}],dataSource:e,size:"small"}),u(je,{children:m(b,{type:"primary",style:{marginTop:"15px"},children:[u(U,{}),"ADD"]})})]})})})}});class He extends p.exports.Component{componentDidMount(){Pe.isLoggedIn()?this.props.history.push("/dashboard"):this.props.history.push("/login")}render(){return u("div",{})}}var We=A((function(e){return{}}),void 0)(He);var Ge=A((function(e){return{isMobile:e.globalReducer.isMobile}}),{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={searchTerm:"",apiData:void 0,isLoading:!1,confirmOrder:!1,movingOrders:void 0,deliveryOrders:void 0,orders:void 0,paidOrders:void 0,unPaidOrders:void 0}}onSearchUser(e,t){return new RegExp(e,"ig").test(t.type)}reFetchData(e){this.setState({isLoading:e},(()=>{this.getPathData({path:"/browse/orders"}).then((({items:e})=>{console.log(e,"orders");const t=e.filter((e=>"successful"===e.payment)),a=e.filter((e=>"successful"!==e.payment));this.setState({isLoading:!1,apiData:e,orders:e,paidOrders:t,unPaidOrders:a})})).catch((()=>this.setState({isLoading:!1})))}))}componentDidMount(){this.reFetchData(!0);const e=ze.connect();e.on("conn",(()=>{console.log("socket connected")})),e.on("newOrder",(()=>{this.reFetchData(!0),console.log("newOrder")}))}render(){return this.state.isLoading?u(Re,{}):this.state.apiData?u("div",{children:u(f,{justify:"center",children:u(R,{xs:{span:23},lg:{span:23},style:{paddingBottom:300},children:u(x,{title:m(g.Fragment,{children:[m("span",{children:[u(W,{}),"  "," ORDERS"]}),u("br",{}),this.props.isMobile&&u("div",{style:{marginTop:8}})]}),children:m(G,{onChange:e=>{this.getPathData({path:`/browse/${e}`}).then((({items:e})=>{console.log(e,"items"),this.setState({isLoading:!1,apiData:e,deliveryOrders:e})})).catch((()=>this.setState({isLoading:!1})))},defaultActiveKey:"1",children:[u(G.TabPane,{tab:"Paid",children:u(N,{rowKey:e=>e.id,pagination:{defaultPageSize:5,hideOnSinglePage:!0,showSizeChanger:!1},columns:[{title:"ITEM",dataIndex:"name"},{title:"Pcs",dataIndex:"quantity"},{title:"ADDRESS",dataIndex:"country"},{title:"CITY",dataIndex:"city"},{title:"CONTACT",dataIndex:"contact"},{title:"ORDERED AT",dataIndex:"createdAt",render:e=>u(M,{children:J(e).tz("Africa/Kampala").format("MMMM Do, h:mm a")})},{title:"PAYMENT",dataIndex:"payment"},{title:"STATUS",dataIndex:"status"},{title:"ACTION",dataIndex:"actions",render:(e,t)=>m("span",{children:[u(K,{title:"Sure to delete?",onConfirm:()=>this.deletePathData({path:`/orders/${t._id}`}).then((()=>this.props.emitRootKeyChanged())),children:u(b,{type:"primary",danger:!0,shape:"circle",style:{marginLeft:"10px"},icon:u(z,{})})}),u(K,{title:"sure to approve?",onConfirm:()=>{console.log(t),this.updatePathData({path:`/orders/${t._id}`,data:{status:"APPROVED",confirmedAt:new Date}}).then((()=>{this.props.emitRootKeyChanged()})).catch((e=>{c.error(e.message)}))},children:u(b,{type:"primary",shape:"circle",style:{marginLeft:"10px"},icon:u(Y,{})})})]})}],dataSource:this.state.orders,size:"small"})},"orders"),u(G.TabPane,{tab:"POD",children:u(N,{rowKey:e=>e.id,pagination:{defaultPageSize:5,hideOnSinglePage:!0,showSizeChanger:!1},columns:[{title:"ITEM",dataIndex:"item"},{title:"Pcs",dataIndex:"quantity"},{title:"ADDRESS",dataIndex:"address",render:(e,t)=>t.address.locale},{title:"USER",dataIndex:"userId",render:(e,t)=>t.userId.username},{title:"PHONE",dataIndex:"userId.phone",render:(e,t)=>t.userId.phone},{title:"ORDERED AT",dataIndex:"createdAt",render:e=>u(M,{children:J(e).tz("Africa/Kampala").format("MMMM Do, h:mm a")})},{title:"PAYMENT",dataIndex:"payment"},{title:"STATUS",dataIndex:"status"},{title:"ACTION",dataIndex:"actions",render:(e,t)=>m("span",{children:[u(K,{title:"Sure to delete?",onConfirm:()=>this.deletePathData({path:`/orders/${t._id}`}).then((()=>this.props.emitRootKeyChanged())),children:u(b,{type:"primary",danger:!0,shape:"circle",style:{marginLeft:"10px"},icon:u(z,{})})}),u(K,{title:"sure to approve?",onConfirm:()=>{console.log(t),this.updatePathData({path:`/orders/${t._id}`,data:{status:"APPROVED",confirmedAt:new Date}}).then((()=>{this.props.emitRootKeyChanged()})).catch((e=>{c.error(e.message)}))},children:u(b,{type:"primary",shape:"circle",style:{marginLeft:"10px"},icon:u(Y,{})})})]})}],dataSource:this.state.unPaidOrders,size:"small"})},"unpaid")]})})})})}):u(ke,{reloadCallBack:this.reFetchData.bind(this)})}});var Je=A(void 0,{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={isLoading:!1,isModalVisible:!1,data:w(e.data,{}),where:""}}setData(e,t){this.setState({data:w(this.state.data,{[`${e}`]:t})})}add(){this.setState({isLoading:!0},(()=>{this[this.state.data.id?"updatePathData":"postPathData"]({path:"/places",data:w(this.state.data)}).then((e=>{console.log(e),this.props.emitRootKeyChanged(),c.success(`Driver ${this.props.data.id?"updated":"added"} sucessfully`)})).catch((()=>{this.setState({isLoading:!1})}))}))}render(){return m(M,{children:[u(E,{title:(this.props.data?"UPDATE":"NEW")+" DRIVER",visible:this.state.isModalVisible,onOk:this.add.bind(this),onCancel:()=>this.setState({isModalVisible:!1}),okButtonProps:{disabled:this.state.isLoading},cancelButtonProps:{disabled:this.state.isLoading},okText:this.props.data?"UPDATE":"ADD",children:this.state.isLoading?u(Re,{}):u(L,{layout:"vertical",children:m(f,{gutter:{xs:8,sm:16,md:24,lg:32},children:[u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"WHERE",required:!this.props.data,children:u(_,{placeholder:"Where",size:"large",value:this.state.data.where,onChange:e=>this.setData("where",e),children:["Hostel","Campus","Other"].map(((e,t)=>u(_.Option,{value:e,children:e},t)))})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"NAME OF SPOT",required:!this.props.data,children:u(S,{type:"text",placeholder:"Spot",name:"spot",size:"large",value:this.state.data.spot,onChange:e=>this.setData("spot",e.target.value)})})})]})})}),g.cloneElement(this.props.children,{onClick:()=>this.setState({isModalVisible:!0})})]})}});var Ye=A((function(e){return{isMobile:e.globalReducer.isMobile}}),{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={searchTerm:"",apiData:void 0,isLoading:!1}}onSearchUser(e,t){return new RegExp(e,"ig").test(t.spot)}reFetchData(){this.setState({isLoading:!0},(()=>{this.getPathData({path:"/browse/places"}).then((({items:e})=>{this.setState({isLoading:!1,apiData:e}),console.log("items",e)})).catch((()=>this.setState({isLoading:!1})))}))}componentDidMount(){this.reFetchData()}render(){if(this.state.isLoading)return u(Re,{});if(!this.state.apiData)return u(ke,{reloadCallBack:this.reFetchData.bind(this)});const e=this.state.apiData.filter((e=>!this.state.searchTerm||this.onSearchUser(this.state.searchTerm,e))),t=u(S,{placeholder:"Search",type:"text",onChange:e=>this.setState({searchTerm:(e.target.value||"").trim()})});return u(f,{justify:"center",children:u(R,{xs:{span:23},lg:{span:16},style:{paddingBottom:300},children:m(x,{extra:!this.props.isMobile&&t,title:m(g.Fragment,{children:[m("span",{children:[u(X,{}),"  ","DRIVERS"]}),u("br",{}),this.props.isMobile&&u("div",{style:{marginTop:8},children:t})]}),children:[u(N,{rowKey:"username",pagination:{defaultPageSize:5,hideOnSinglePage:!0,showSizeChanger:!1},columns:[{title:"WHERE",dataIndex:"where",sorter:(e,t)=>e.where.localeCompare(t.where),defaultSortOrder:"ascend",sortDirections:["descend","ascend"]},{title:"SPOT",dataIndex:"spot"},{title:"PHONE",dataIndex:"phone"},{title:"ADDRESS",dataIndex:"address"},{title:"VEHICLE",dataIndex:"vehicle"},{title:"ACTIONS",dataIndex:"actions",render:(e,t)=>m("span",{children:[u(Je,{data:t,children:u(b,{shape:"circle",type:"primary",children:u(H,{})})}),u(K,{title:"Sure to delete?",onConfirm:()=>this.deletePathData({path:`/places/${t.id}`}).then((()=>this.props.emitRootKeyChanged())),children:u(b,{type:"primary",danger:!0,shape:"circle",style:{marginLeft:"10px"},icon:u(z,{})})})]})}],dataSource:e,size:"small"}),u(Je,{children:m(b,{type:"primary",style:{marginTop:"15px"},children:[u(Z,{}),"ADD"]})})]})})})}});let Xe=Ce.getAuthKeyFromStorage()||"";var Ze=A(void 0,{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),l(this,"handleChange",(e=>{"removed"===e.file.status&&(e.fileList.length<10&&this.setState({limit:!1}),this.deletePathData({path:`/gfsUpload/${e.file.response.streamId}`}),console.log(this.state.streamIds,"stre"),this.setState({streamIds:this.state.streamIds.filter((function(t){return t!==e.file.response.streamId}))}),console.log(this.state.streamIds),this.deletePathData({path:`/attachment/${e.file.response.filename}`}),console.log(this.state.imgIds,"img"),this.setState({imgIds:this.state.imgIds.filter((function(t){return t!==e.file.response.filename}))}),console.log(this.state.imgIds)),"uploading"!==e.file.status?"done"===e.file.status&&(console.log(e.file,"done......................"),console.log(e),this.setState({imgIds:[...this.state.imgIds,e.file.response.filename]}),this.setState({streamIds:[...this.state.streamIds,e.file.response.streamId]}),console.log(e.file.response.attachmentId._id),this.setState({attachment:e.file.response.attachmentId._id}),this.getBase64(e.file.originFileObj,(e=>this.setState({imageUrl:e,loading:!1}))),e.fileList.length>=10&&this.setState({limit:!0})):this.setState({loading:!0})})),this.state={isLoading:!1,isModalVisible:!1,data:w(e.data,{}),loading:!1,imageUrl:"",imgIds:[],streamIds:[],attachment:"",limit:!1}}setData(e,t){this.setState({data:w(this.state.data,{[`${e}`]:t})})}add(){this.setState({isLoading:!0},(()=>{this[this.state.data._id?"updatePathData":"postPathData"]({path:"/products",data:w(this.state.data,{imgIds:this.state.imgIds,attachment:this.state.attachment,streamIds:this.state.streamIds})}).then((()=>{c.success(`Product ${this.props.data.id?"updated":"added"} sucessfully`),this.props.emitRootKeyChanged(),this.setState({isModalVisible:!1})})).catch((()=>{this.setState({isLoading:!1})}))}))}getBase64(e,t){const a=new FileReader;a.addEventListener("load",(()=>t(a.result))),a.readAsDataURL(e)}render(){const{loading:e,imageUrl:t}=this.state,a=m("div",{children:[u(e?T:k,{}),u("div",{style:{marginTop:8},children:"Upload"})]});return console.log(this.state,"state"),m(M,{children:[u(E,{title:(this.props.data?"UPDATE":"NEW")+" ITEM",visible:this.state.isModalVisible,onOk:this.add.bind(this),onCancel:()=>{this.setState({isModalVisible:!1,imgIds:[],streamIds:[]}),this.setData("category",""),this.setData("name",""),this.setData("cost",""),this.setData("description","")},okButtonProps:{disabled:this.state.isLoading},cancelButtonProps:{disabled:this.state.isLoading},okText:this.props.data?"UPDATE":"ADD",children:this.state.isLoading?u(Re,{}):m(L,{layout:"vertical",children:[u(f,{children:u(O,{name:"banner",listType:"picture-card",className:"avatar-uploader",showUploadList:!0,action:`${this.apiManager.getApiUrl()}/gfsUpload`,onChange:this.handleChange,headers:{"X-Access-Token":Xe},multiple:!0,children:this.state.limit?void 0:a})}),m(f,{gutter:{xs:8,sm:16,md:24,lg:32},children:[u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"Catergory",required:!this.props.data,children:u(_,{placeholder:"Category",size:"large",value:this.state.data.catergory,onChange:e=>this.setData("category",e),defaultValue:this.state.data.category,children:["SUPPLEMENTS","HAIR"].map(((e,t)=>u(_.Option,{value:e,children:e},t)))})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"VARIANT",required:!this.props.data,children:u(_,{placeholder:"Variant",size:"large",value:this.state.data.variant,onChange:e=>this.setData("variant",e),defaultValue:this.state.data.variant,children:["MEN","WOMEN","BOTH"].map(((e,t)=>u(_.Option,{value:e,children:e},t)))})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"NAME OF ITEM",required:!this.props.data,children:u(S,{type:"text",placeholder:"Name",name:"name",size:"large",value:this.state.data.name,onChange:e=>this.setData("name",e.target.value)})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"UNIT COST",required:!this.props.data,children:u(S,{type:"text",placeholder:"Cost",name:"cost",size:"large",value:this.state.data.cost,onChange:e=>this.setData("cost",e.target.value)})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"DESCRIPTION",required:!this.props.data,children:u(S.TextArea,{placeholder:"DESCRIPTION",name:"DESCRIPTION",size:"large",value:this.state.data.description,onChange:e=>this.setData("description",e.target.value)})})}),u(R,{className:"gutter-row",span:12,children:u(L.Item,{label:"QUANTITY",required:!this.props.data,children:u(S,{type:"number",placeholder:"Number of pieces",name:"stock",size:"large",value:this.state.data.stock,onChange:e=>this.setData("stock",e.target.value)})})})]})]})}),g.cloneElement(this.props.children,{onClick:()=>this.setState({isModalVisible:!0})})]})}});var Qe=A((function(e){return{isMobile:e.globalReducer.isMobile}}),{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={searchTerm:"",apiData:void 0,isLoading:!1}}onSearchUser(e,t){return new RegExp(e,"ig").test(t.username)}reFetchData(){this.setState({isLoading:!0},(()=>{this.getPathData({path:"/browse/products"}).then((({items:e})=>{console.log(e,"products"),this.setState({isLoading:!1,apiData:e})})).catch((()=>this.setState({isLoading:!1})))}))}componentDidMount(){this.reFetchData()}render(){if(this.state.isLoading)return u(Re,{});if(!this.state.apiData)return u(ke,{reloadCallBack:this.reFetchData.bind(this)});const e=this.state.apiData.filter((e=>!this.state.searchTerm||this.onSearchUser(this.state.searchTerm,e))),t=u(S,{placeholder:"Search",type:"text",onChange:e=>this.setState({searchTerm:(e.target.value||"").trim()})});return u(f,{justify:"center",children:u(R,{xs:{span:23},lg:{span:16},style:{paddingBottom:300},children:m(x,{extra:!this.props.isMobile&&t,title:m(g.Fragment,{children:[m("span",{children:[u(U,{}),"ITEMS"]}),u("br",{}),this.props.isMobile&&u("div",{style:{marginTop:8},children:t})]}),children:[u(N,{rowKey:"_id",pagination:{defaultPageSize:5,hideOnSinglePage:!0,showSizeChanger:!1},columns:[{title:"ITEM",dataIndex:"imgIds",key:"id",render:e=>u("img",{src:`${this.apiManager.getApiUrl()}/gfsUpload/preview/${e[0]}`,width:100,height:100})},{title:"NAME",dataIndex:"name"},{title:"COST",dataIndex:"cost"},{title:"DESCRIPTION",dataIndex:"description",render:e=>e.substring(0,75).concat("...")},{title:"ACTIONS",dataIndex:"actions",render:(e,t)=>m("span",{children:[u(Ze,{data:t,children:u(b,{shape:"circle",type:"primary",children:u(H,{})})}),u(K,{title:"Sure to delete?",onConfirm:()=>{this.deletePathData({path:`/products/${t._id}`}).then((()=>this.props.emitRootKeyChanged()))},children:u(b,{type:"primary",danger:!0,shape:"circle",style:{marginLeft:"10px"},icon:u(z,{})})})]})}],dataSource:e,size:"small"}),u(Ze,{children:m(b,{type:"primary",style:{marginTop:"15px"},children:[u(U,{}),"ADD"]})})]})})})}});class et extends we{constructor(e){super(e),this.state={isLoading:!1,old:"",new1:"",new2:""}}onChangePasswordClicked(){this.setState({isLoading:!0},(()=>{this.apiManager.changePass(this.state.old,this.state.new1,this.state.new2).then((e=>{c.success("Password changed successfully!"),this.setState({isLoading:!1})})).catch((e=>{c.error(e.message),this.setState({isLoading:!1})}))}))}render(){return this.state.isLoading?u(Re,{}):m(L,{layout:"vertical",children:[u(L.Item,{label:"OLD PASSWORD",children:u(S.Password,{size:"large",onChange:e=>this.setState({old:e.target.value})})}),u(L.Item,{label:"NEW PASSWORD",children:u(S.Password,{size:"large",onChange:e=>this.setState({new1:e.target.value})})}),u(L.Item,{label:"CONFIRM NEW PASSWORD",children:u(S.Password,{size:"large",onChange:e=>this.setState({new2:e.target.value})})}),u(f,{justify:"end",children:u(b,{block:this.props.isMobile,onClick:()=>this.onChangePasswordClicked(),type:"primary",children:"CHANGE"})})]})}}var tt=A((function(e){return{isMobile:e.globalReducer.isMobile,isAdmin:Ce.isAdmin()}}),void 0)(class extends we{render(){return u("div",{children:u(f,{justify:"center",gutter:20,children:this.props.isAdmin&&u(R,{style:{marginBottom:20},lg:{span:10},xs:{span:23},children:u(x,{style:{height:"100%"},title:"CHANGE PASSWORD",children:u(et,{isMobile:this.props.isMobile})})})})})}});var at=A(void 0,{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={isLoading:!1,isModalVisible:!1,data:w(e.data,{})}}setData(e,t){this.setState({data:w(this.state.data,{[`${e}`]:t})})}add(){this.setState({isLoading:!0},(()=>{this[this.props.data?"updatePathData":"postPathData"]({path:"/auth",data:w(this.state.data)}).then((()=>{this.props.emitRootKeyChanged()})).catch((()=>{this.setState({isLoading:!1})}))}))}render(){return m(M,{children:[u(E,{title:(this.props.data?"UPDATE":"NEW")+" USER",visible:this.state.isModalVisible,onOk:this.add.bind(this),onCancel:()=>this.setState({isModalVisible:!1}),okButtonProps:{disabled:this.state.isLoading},cancelButtonProps:{disabled:this.state.isLoading},okText:this.props.data?"UPDATE":"ADD",children:this.state.isLoading?u(Re,{}):m(L,{layout:"vertical",children:[u(L.Item,{label:"USERNAME",required:!this.props.data,children:u(S,{type:"text",placeholder:"Username",name:"username",size:"large",value:this.state.data.username,onChange:e=>this.setData("username",e.target.value)})}),u(L.Item,{label:"PASSWORD",required:!this.props.data,children:u(S.Password,{placeholder:"Password",name:"password",size:"large",value:this.state.data.password,onChange:e=>this.setData("password",e.target.value)})}),u(L.Item,{label:"ROLES",children:u(_,{onChange:e=>{this.setData("roles",e)},value:this.state.data.roles,size:"large",mode:"multiple",placeholder:"Roles",children:["ADMIN"].map(((e,t)=>u(_.Option,{value:e,children:e},t)))})})]})}),g.cloneElement(this.props.children,{onClick:()=>this.setState({isModalVisible:!0})})]})}});var st=A((function(e){return{isMobile:e.globalReducer.isMobile}}),{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={searchTerm:"",apiData:void 0,isLoading:!1}}onSearchUser(e,t){return new RegExp(e,"ig").test(t.username)}reFetchData(){this.setState({isLoading:!0},(()=>{this.getPathData({path:"/browse/staff"}).then((({items:e})=>{this.setState({isLoading:!1,apiData:e})})).catch((()=>this.setState({isLoading:!1})))}))}componentDidMount(){this.reFetchData()}render(){if(this.state.isLoading)return u(Re,{});if(!this.state.apiData)return u(ke,{reloadCallBack:this.reFetchData.bind(this)});const e=this.state.apiData.filter((e=>!this.state.searchTerm||this.onSearchUser(this.state.searchTerm,e))),t=u(S,{placeholder:"Search",type:"text",onChange:e=>this.setState({searchTerm:(e.target.value||"").trim()})});return u(f,{justify:"center",children:u(R,{xs:{span:23},lg:{span:16},style:{paddingBottom:300},children:m(x,{extra:!this.props.isMobile&&t,title:m(g.Fragment,{children:[m("span",{children:[u(Q,{}),"  ","STAFF"]}),u("br",{}),this.props.isMobile&&u("div",{style:{marginTop:8},children:t})]}),children:[u(N,{rowKey:"username",pagination:{defaultPageSize:5,hideOnSinglePage:!0,showSizeChanger:!1},columns:[{title:"USERNAME",dataIndex:"username",sorter:(e,t)=>e.username.localeCompare(t.username),defaultSortOrder:"descend",sortDirections:["descend","ascend"]},{title:"ROLES",dataIndex:"roles",render:e=>u(M,{children:e.join(",")})},{title:"ACTIONS",dataIndex:"actions",render:(e,t)=>m("span",{children:[u(at,{data:t,children:u(b,{shape:"circle",type:"primary",children:u(H,{})})}),u(K,{title:"Sure to delete?",onConfirm:()=>this.deletePathData({path:`/auth/${t.id}`}).then((()=>this.props.emitRootKeyChanged())),children:u(b,{type:"primary",danger:!0,shape:"circle",style:{marginLeft:"10px"},icon:u(z,{})})})]})}],dataSource:e,size:"small"}),u(at,{children:m(b,{type:"primary",style:{marginTop:"15px"},children:[u(Z,{}),"ADD"]})})]})})})}});var it=A(void 0,{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={isLoading:!1,isModalVisible:!1,data:w(e.data,{})}}setData(e,t){this.setState({data:w(this.state.data,{[`${e}`]:t})})}add(){this.setState({isLoading:!0},(()=>{this[this.props.data?"updatePathData":"postPathData"]({path:"/auth",data:w(this.state.data)}).then((()=>{this.props.emitRootKeyChanged()})).catch((()=>{this.setState({isLoading:!1})}))}))}render(){return m(M,{children:[u(E,{title:(this.props.data?"UPDATE":"NEW")+" USER",visible:this.state.isModalVisible,onOk:this.add.bind(this),onCancel:()=>this.setState({isModalVisible:!1}),okButtonProps:{disabled:this.state.isLoading},cancelButtonProps:{disabled:this.state.isLoading},okText:this.props.data?"UPDATE":"ADD",children:this.state.isLoading?u(Re,{}):m(L,{layout:"vertical",children:[u(L.Item,{label:"USERNAME",required:!this.props.data,children:u(S,{type:"text",placeholder:"Username",name:"username",size:"large",value:this.state.data.username,onChange:e=>this.setData("username",e.target.value)})}),u(L.Item,{label:"PASSWORD",required:!this.props.data,children:u(S.Password,{placeholder:"Password",name:"password",size:"large",value:this.state.data.password,onChange:e=>this.setData("password",e.target.value)})}),u(L.Item,{label:"ROLES",children:u(_,{onChange:e=>{this.setData("roles",e)},value:this.state.data.roles,size:"large",mode:"multiple",placeholder:"Roles",children:["ADMIN"].map(((e,t)=>u(_.Option,{value:e,children:e},t)))})})]})}),g.cloneElement(this.props.children,{onClick:()=>this.setState({isModalVisible:!0})})]})}});var rt=A((function(e){return{isMobile:e.globalReducer.isMobile}}),{emitRootKeyChanged:Oe})(class extends we{constructor(e){super(e),this.state={searchTerm:"",apiData:void 0,isLoading:!1}}onSearchUser(e,t){return new RegExp(e,"ig").test(t.username)}reFetchData(){this.setState({isLoading:!0},(()=>{this.getPathData({path:"/browse/users"}).then((({items:e})=>{console.log("users",e),this.setState({isLoading:!1,apiData:e})})).catch((()=>this.setState({isLoading:!1})))}))}componentDidMount(){this.reFetchData()}render(){if(this.state.isLoading)return u(Re,{});if(!this.state.apiData)return u(ke,{reloadCallBack:this.reFetchData.bind(this)});const e=this.state.apiData.filter((e=>!this.state.searchTerm||this.onSearchUser(this.state.searchTerm,e))),t=u(S,{placeholder:"Search",type:"text",onChange:e=>this.setState({searchTerm:(e.target.value||"").trim()})});return u(f,{justify:"center",children:u(R,{xs:{span:23},lg:{span:16},style:{paddingBottom:300},children:u(x,{extra:!this.props.isMobile&&t,title:m(g.Fragment,{children:[m("span",{children:[u(ee,{}),"  "," USERS"]}),u("br",{}),this.props.isMobile&&u("div",{style:{marginTop:8},children:t})]}),children:u(N,{rowKey:"username",pagination:{defaultPageSize:5,hideOnSinglePage:!0,showSizeChanger:!1},columns:[{title:"USERNAME",dataIndex:"username",sorter:(e,t)=>e.username.localeCompare(t.username),defaultSortOrder:"descend",sortDirections:["descend","ascend"]},{title:"Phone Number",dataIndex:"phone"},{title:"Join Date",dataIndex:"createdAt",render:e=>u(M,{children:J(e).tz("Africa/Kampala").format("MMMM Do, h:mm a")})},{title:"",dataIndex:"actions",render:(e,t)=>m("span",{children:[u(it,{data:t,children:u(b,{shape:"circle",type:"primary",children:u(H,{})})}),u(K,{title:"Sure to delete?",onConfirm:()=>this.deletePathData({path:`/users/${t.id}`}).then((()=>this.props.emitRootKeyChanged())),children:u(b,{type:"primary",danger:!0,shape:"circle",style:{marginLeft:"10px"},icon:u(z,{})})})]})}],dataSource:e,size:"small"})})})})}});const{Header:nt,Content:ot,Sider:dt}=ie;var lt=A((function(e){return{rootElementKey:e.globalReducer.rootElementKey,isMobile:e.globalReducer.isMobile,isAdmin:Ce.isAdmin()}}),{emitSizeChanged:function(){return{type:"SIZE_CHANGED",payload:{}}}})(class extends we{constructor(e){super(e),l(this,"mainContainer"),l(this,"updateDimensions",(()=>this.props.emitSizeChanged())),l(this,"toggleSider",(()=>{Ce.setSiderCollapsedStateInLocalStorage(!this.state.collapsed),this.setState({collapsed:!this.state.collapsed})})),this.mainContainer=g.createRef(),this.state={collapsed:!1,me:{}}}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),this.updateDimensions(),window.removeEventListener("resize",this.updateDimensions)}componentDidUpdate(e){this.props.location.pathname!==e.location.pathname&&this.props.isMobile&&this.setState({collapsed:!0})}componentDidMount(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions),Pe.isLoggedIn()?this.setState({collapsed:Ce.getSiderCollapsedStateFromLocalStorage()}):this.goToLogin()}goToLogin(){this.props.history.push("/login")}logout(){this.apiManager.setAuthToken(""),Ce.setAdmin(!1),this.goToLogin()}createUpdateAvailableIfNeeded(){const e=this;return u(p.exports.Fragment,{children:u(Be,{onLinkClicked:()=>e.props.history.push("/settings")})})}render(){const e=this,t=[...this.props.isAdmin?[{key:"dashboard",name:"Dashboard",icon:u(te,{})},{key:"orders",name:"ORDERS",icon:u(W,{})},{key:"products",name:"PRODUCTS",icon:u(ae,{})},{key:"gridProducts",name:"Grid PRODUCTS",icon:u(ae,{})},{key:"staff",name:"STAFF",icon:u(Q,{})},{key:"banners",name:"Banners",icon:u(U,{})}]:[{key:"orders",name:"ORDERS",icon:u(W,{})},{key:"items",name:"PRODUCTS",icon:u(ae,{})},{key:"banners",name:"Banners",icon:u(U,{})}],{key:"settings",name:"SETTINGS",icon:u(se,{})}];return m(ie,{className:"full-screen",children:[u(nt,{className:"header",style:{padding:`0 ${this.props.isMobile?15:50}px`},children:u("div",{children:m(f,{children:[this.props.isMobile&&u(R,{span:4,children:u(b,{ghost:!0,icon:u(re,{}),onClick:this.toggleSider})}),u(R,{lg:{span:12},xs:{span:20},children:u("div",{children:m("h3",{style:{color:"#fff"},children:[u("img",{alt:"logo",src:"https://salim-api.igcfashion.co/igc-fashion-logo.png",style:{height:35,width:35,marginRight:10}}),"IGC FASHION ADMIN PANEL"]})})}),!e.props.isMobile&&u(R,{span:12,children:m(f,{justify:"end",children:[u("span",{style:{marginRight:70},children:u(Ve,{})}),u("span",{children:u("span",{style:{border:"1px solid #1b8ad3",borderRadius:5,padding:8},children:m(Be,{onLinkClicked:this.logout.bind(this),children:["LOGOUT "," ",u(ne,{})]})})})]})})]})})}),m(ie,{children:[u(dt,{breakpoint:"lg",trigger:this.props.isMobile&&void 0,collapsible:!0,collapsed:this.state.collapsed,width:200,collapsedWidth:e.props.isMobile?0:80,style:{zIndex:2},onCollapse:this.toggleSider,children:m(oe,{selectedKeys:[this.props.location.pathname.substring(1)],theme:"dark",mode:"inline",defaultSelectedKeys:["users"],style:{height:"100%",borderRight:0},children:[t.map((e=>{var t;return(null==(t=e.subitems)?void 0:t.length)?u(oe.SubMenu,{icon:e.icon,title:e.name,children:e.subitems.map((e=>u(oe.Item,{children:u(de,{to:`/${e.key}`,className:"nav-text",children:e.name})},e.key)))},e.key):u(oe.Item,{children:m(de,{to:`/${e.key}`,className:"nav-text",children:[e.icon,u("span",{children:e.name})]})},e.key)})),this.props.isMobile&&m(p.exports.Fragment,{children:[u("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.65)",height:1,width:"80%",margin:"15px auto"}}),u("div",{className:"ant-menu-item",role:"menuitem",style:{paddingLeft:24},children:m(Be,{onLinkClicked:this.logout.bind(this),children:[u(ne,{}),"LOGOUT"]})})]})]})}),u(ot,{children:u("div",{ref:e.mainContainer,style:{paddingTop:12,paddingBottom:0,height:"100%",overflowY:"scroll",marginRight:e.state.collapsed?0:e.props.isMobile?-200:0,transition:"margin-right 0.3s ease"},id:"main-content-layout",children:m(le,{children:[u(he,{path:"/dashboard/",component:Fe}),u(he,{path:"/users/",component:rt}),u(he,{path:"/staff/",component:st}),u(he,{path:"/orders",component:Ge}),u(he,{path:"/products",component:Qe}),u(he,{path:"/gridProducts",component:_e}),u(he,{path:"/places",component:Ye}),u(he,{path:"/banners",component:Ke}),u(he,{path:"/settings/",component:tt}),u(he,{path:"/",component:We})]})},e.props.rootElementKey)})]})]})}});const ht={isAdmin:Ce.isAdmin(),isMobile:Te.isMobile()};const ct=ce({globalReducer:function(e=ht,t){switch(t.type){case"ROOT_KEY_CHANGED":return d(o({},e),{rootElementKey:Te.generateUuidV4()});case"SIZE_CHANGED":return d(o({},e),{isMobile:Te.isMobile()});default:return e}}}),pt=pe(me)(ge)(ct);class gt extends p.exports.Component{constructor(e){super(e),this.state={themeLoaded:!1};const t=Ce.getDarkModeFromLocalStorage();$e.loadTheme(t).then((()=>{this.setState({themeLoaded:!0})}))}render(){const{themeLoaded:e}=this.state;return e?u(ue,{store:pt,children:u("div",{className:"full-screen",children:u(Se,{children:m(le,{children:[u(he,{path:"/login/",component:Me}),u(he,{path:"/",component:lt})]})})})}):u("div",{})}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),ye.render(u(gt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}));
